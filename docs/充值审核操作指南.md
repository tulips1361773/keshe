# Django Admin 充值审核操作指南

## 🎯 访问管理后台

1. **打开浏览器**，访问管理后台地址：
   ```
   http://127.0.0.1:8000/admin/
   ```

2. **登录管理员账户**：
   - 用户名：`admin`
   - 密码：`testpass123`

## 📋 找到充值审核功能

### 步骤1：进入支付管理
- 登录后，在主页面找到 **"支付管理"** 部分
- 点击 **"Payments"** 链接

### 步骤2：筛选待审核订单
在Payments列表页面右侧，使用筛选器：

1. **Payment type** 筛选器：
   - 选择 `recharge`（充值）

2. **Status** 筛选器：
   - 选择 `pending`（待审核）

3. 点击 **"筛选"** 按钮

### 步骤3：执行审核操作

1. **选择订单**：
   - 在订单列表中，勾选需要审核的充值订单
   - 可以选择单个或多个订单

2. **选择操作**：
   - 在页面底部找到 **"操作"** 下拉菜单
   - 选择以下操作之一：
     - `批准选中的充值订单` - 审核通过
     - `拒绝选中的充值订单` - 审核拒绝

3. **执行操作**：
   - 点击 **"执行"** 按钮
   - 系统会显示操作结果

## 📊 当前待审核订单

根据系统检查，当前有 **3个** 待审核充值订单：

- **PAY20250914CCAADCF8**: pending_recharge_user ¥200.00
- **PAY20250914BA5E99FA**: pending_recharge_user ¥100.00  
- **PAY20250914C1BD915E**: pending_recharge_user ¥50.00

## 🔍 审核后验证

### 查看用户余额变化
1. 在管理后台，进入 **"支付管理"** > **"User accounts"**
2. 搜索用户 `pending_recharge_user`
3. 查看余额是否正确增加

### 查看交易记录
1. 进入 **"支付管理"** > **"Account transactions"**
2. 查看是否生成了相应的交易记录

## 💡 功能说明

### 批准充值时系统会：
- ✅ 将订单状态改为 `completed`
- ✅ 设置支付完成时间
- ✅ 增加用户账户余额
- ✅ 创建账户交易记录
- ✅ 更新用户总充值金额

### 拒绝充值时系统会：
- ❌ 将订单状态改为 `failed`
- ❌ 设置处理时间
- ❌ 不会影响用户余额

## 🚨 注意事项

1. **只能审核待审核状态的订单**（status=pending）
2. **批量操作支持**：可以同时审核多个订单
3. **操作不可逆**：审核通过后无法直接撤销，需要通过退款流程
4. **权限要求**：只有超级管理员可以执行此操作

## 🔧 故障排除

### 如果看不到充值审核选项：
1. 确认已正确筛选 `payment_type=recharge` 和 `status=pending`
2. 确认有待审核的充值订单
3. 检查管理员权限
4. 刷新页面重试

### 如果操作失败：
1. 检查网络连接
2. 查看Django服务器日志
3. 确认数据库连接正常
4. 联系技术支持