# ğŸ“ çƒå°ç®¡ç†è¯´æ˜

## é—®é¢˜è¯Šæ–­

### åŸå› åˆ†æ
ç”¨æˆ·é‡åˆ°çš„"è¯¥æ—¶é—´æ®µæš‚æ— å¯ç”¨çƒå°ï¼Œè¯·è°ƒæ•´æ—¶é—´"é—®é¢˜çš„æ ¹æœ¬åŸå› æ˜¯ï¼š
- **ä¸­å¿ƒæ ¡åŒºæ²¡æœ‰çƒå°æ•°æ®**ï¼šç”¨æˆ·é€‰æ‹©çš„æ ¡åŒºä¸­æ²¡æœ‰åˆ›å»ºä»»ä½•çƒå°
- **çƒå°æ•°æ®åˆ†å¸ƒä¸å‡**ï¼šåªæœ‰éƒ¨åˆ†æ ¡åŒºæœ‰çƒå°ï¼Œå…¶ä»–æ ¡åŒºä¸ºç©º

### è§£å†³æ–¹æ¡ˆ
å·²ä¸ºæ‰€æœ‰æ ¡åŒºæ·»åŠ äº†çƒå°æ•°æ®ï¼š
- ä¸­å¿ƒæ ¡åŒºï¼š5ä¸ªçƒå° (C01-C05)
- ä¸»æ ¡åŒºï¼š5ä¸ªçƒå° (T01-T05)
- æµ‹è¯•æ ¡åŒºï¼š2ä¸ªçƒå°
- å…¶ä»–æ ¡åŒºï¼šæ ¹æ®éœ€è¦æ·»åŠ 

## çƒå°ç®¡ç†æ–¹å¼

### 1. Djangoç®¡ç†åå°
è®¿é—®åœ°å€ï¼š`http://localhost:8000/admin/`

**åŠŸèƒ½ï¼š**
- æŸ¥çœ‹æ‰€æœ‰çƒå°åˆ—è¡¨
- æ·»åŠ æ–°çƒå°
- ç¼–è¾‘çƒå°ä¿¡æ¯ï¼ˆç¼–å·ã€åç§°ã€çŠ¶æ€ç­‰ï¼‰
- åˆ é™¤çƒå°
- æŒ‰æ ¡åŒºç­›é€‰çƒå°

**æ“ä½œæ­¥éª¤ï¼š**
1. ç™»å½•ç®¡ç†åå°
2. ç‚¹å‡»ã€ŒReservationsã€â†’ã€ŒTablesã€
3. å¯ä»¥æŸ¥çœ‹ã€æ·»åŠ ã€ç¼–è¾‘çƒå°

### 2. å‘½ä»¤è¡Œç®¡ç†

#### æŸ¥çœ‹çƒå°åˆ†å¸ƒ
```bash
python manage.py shell -c "from reservations.models import Table; from campus.models import Campus; [print(f'{c.name}: {Table.objects.filter(campus=c).count()}ä¸ªçƒå°') for c in Campus.objects.all()]"
```

#### ä¸ºæ ¡åŒºæ·»åŠ çƒå°
```python
# è¿›å…¥Django shell
python manage.py shell

# æ·»åŠ çƒå°çš„Pythonä»£ç 
from reservations.models import Table
from campus.models import Campus

# è·å–æ ¡åŒº
campus = Campus.objects.get(name='æ ¡åŒºåç§°')

# åˆ›å»ºçƒå°
for i in range(1, 6):  # åˆ›å»º5ä¸ªçƒå°
    Table.objects.create(
        campus=campus,
        number=f'T{i:02d}',
        name=f'{campus.name}{i}å·å°',
        status='available'
    )
```

#### æ‰¹é‡åˆ›å»ºçƒå°è„šæœ¬
```python
# ä¸ºæ‰€æœ‰æ ¡åŒºåˆ›å»ºçƒå°
from reservations.models import Table
from campus.models import Campus

for campus in Campus.objects.all():
    existing_count = Table.objects.filter(campus=campus).count()
    if existing_count == 0:
        # ä¸ºæ²¡æœ‰çƒå°çš„æ ¡åŒºåˆ›å»º3ä¸ªçƒå°
        for i in range(1, 4):
            Table.objects.create(
                campus=campus,
                number=f'{campus.name[:2]}{i:02d}',
                name=f'{campus.name}{i}å·å°',
                status='available'
            )
        print(f'ä¸º {campus.name} åˆ›å»ºäº†3ä¸ªçƒå°')
```

### 3. APIæ¥å£ç®¡ç†

#### æŸ¥è¯¢å¯ç”¨çƒå°
```
GET /api/reservations/tables/available/
å‚æ•°ï¼š
- campus_id: æ ¡åŒºID
- start_time: å¼€å§‹æ—¶é—´ (YYYY-MM-DD HH:MM:SS)
- end_time: ç»“æŸæ—¶é—´ (YYYY-MM-DD HH:MM:SS)
```

#### çƒå°åˆ—è¡¨
```
GET /api/reservations/tables/
```

## çƒå°çŠ¶æ€è¯´æ˜

- `available`: å¯ç”¨
- `maintenance`: ç»´æŠ¤ä¸­
- `disabled`: å·²ç¦ç”¨

## å¸¸è§é—®é¢˜æ’æŸ¥

### 1. "è¯¥æ—¶é—´æ®µæš‚æ— å¯ç”¨çƒå°"
**æ£€æŸ¥æ­¥éª¤ï¼š**
1. ç¡®è®¤é€‰æ‹©çš„æ ¡åŒºæ˜¯å¦æœ‰çƒå°
2. æ£€æŸ¥çƒå°çŠ¶æ€æ˜¯å¦ä¸º `available`
3. ç¡®è®¤æ—¶é—´æ®µæ˜¯å¦æœ‰é¢„çº¦å†²çª
4. æ£€æŸ¥çƒå°çš„ `is_active` å­—æ®µ

### 2. çƒå°ä¸æ˜¾ç¤º
**å¯èƒ½åŸå› ï¼š**
- çƒå°çŠ¶æ€ä¸æ˜¯ `available`
- çƒå°çš„ `is_active` ä¸º `False`
- æ ¡åŒºIDä¼ é€’é”™è¯¯
- æ—¶é—´æ ¼å¼ä¸æ­£ç¡®

### 3. è°ƒè¯•å·¥å…·
ä½¿ç”¨é¡¹ç›®ä¸­çš„è°ƒè¯•è„šæœ¬ï¼š
```bash
python debug_api_issue.py
```

æˆ–ä½¿ç”¨è°ƒè¯•é¡µé¢ï¼š
```
http://localhost:3000/test_table_debug.html
```

## æ•°æ®åº“ç»“æ„

### Tableæ¨¡å‹å­—æ®µ
- `id`: ä¸»é”®
- `campus`: æ ¡åŒºå¤–é”®
- `number`: çƒå°ç¼–å·
- `name`: çƒå°åç§°
- `status`: çŠ¶æ€ (available/maintenance/disabled)
- `description`: æè¿°
- `is_active`: æ˜¯å¦æ¿€æ´»
- `created_at`: åˆ›å»ºæ—¶é—´
- `updated_at`: æ›´æ–°æ—¶é—´

## å»ºè®®

1. **å®šæœŸæ£€æŸ¥çƒå°æ•°æ®**ï¼šç¡®ä¿æ¯ä¸ªæ ¡åŒºéƒ½æœ‰è¶³å¤Ÿçš„çƒå°
2. **åˆç†åˆ†é…çƒå°**ï¼šæ ¹æ®æ ¡åŒºè§„æ¨¡å’Œä½¿ç”¨é¢‘ç‡åˆ†é…çƒå°æ•°é‡
3. **çŠ¶æ€ç®¡ç†**ï¼šåŠæ—¶æ›´æ–°çƒå°çš„ç»´æŠ¤çŠ¶æ€
4. **ç›‘æ§ä½¿ç”¨æƒ…å†µ**ï¼šé€šè¿‡é¢„çº¦æ•°æ®åˆ†æçƒå°ä½¿ç”¨ç‡

---

*æœ€åæ›´æ–°ï¼š2025å¹´9æœˆ13æ—¥*