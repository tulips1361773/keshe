# 乒乓球培训管理系统需求分析文档

## 1. 项目概述

### 1.1 项目背景
蓝星软件公司计划面向全国的乒乓球培训机构开发一个乒乓球培训管理系统，帮助培训机构完成学生报名、教练入职、选课、排课、学费收取和退费、训练环节记录和比赛管理等功能。

### 1.2 项目目标
- 提供完整的培训机构管理解决方案
- 支持多校区分布式管理
- 实现学员与教练的双向选择机制
- 提供便捷的课程预约和支付系统
- 支持比赛组织和管理
- 建立完善的系统日志和评价体系

## 2. 用户角色分析

### 2.1 超级管理员
- **权限**：系统最高权限，可操作所有校区
- **职责**：
  - 创建和管理校区信息
  - 指定校区管理员
  - 系统全局配置和监控
  - 默认成为中心校区管理员

### 2.2 校区管理员
- **权限**：管理指定校区的所有业务
- **职责**：
  - 审核教练员注册申请
  - 管理学员和教练员信息
  - 处理课程预约管理
  - 线下支付录入
  - 查看系统日志

### 2.3 学员
- **权限**：个人信息管理和课程相关操作
- **职责**：
  - 注册和维护个人信息
  - 查询和选择教练员
  - 预约和取消课程
  - 账户充值和支付
  - 参与比赛报名
  - 课后评价

### 2.4 教练员
- **权限**：个人信息管理和教学相关操作
- **职责**：
  - 注册申请和信息维护
  - 处理学员选择申请
  - 确认或拒绝课程预约
  - 管理个人课表
  - 课后评价学员

## 3. 功能需求分析

### 3.1 用户管理模块

#### 3.1.1 学员注册
- **必填信息**：用户名、密码、真实姓名、校区、电话
- **可选信息**：性别、年龄、邮箱
- **密码要求**：8-16位，包含字母、数字和特殊字符
- **校区选择**：从下拉列表选择
- **审核机制**：无需后台审核，直接注册成功

#### 3.1.2 教练员注册
- **基本信息**：与学员相同
- **额外信息**：照片、比赛成绩描述
- **教练等级**：高级(200元/小时)、中级(150元/小时)、初级(80元/小时)
- **审核机制**：需校区管理员审核通过

#### 3.1.3 信息维护
- 支持用户更换照片、修改密码等基本信息
- 数据验证和格式检查

### 3.2 校区管理模块

#### 3.2.1 校区信息管理
- **基本信息**：名称、地址、联系方式（联系人、电话、邮箱）
- **管理层级**：中心校区和分校区
- **权限分配**：指定校区管理员

### 3.3 教练员查询与选择模块

#### 3.3.1 查询方式
- **条件查询**：按姓名、性别、年龄查询（至少填写一项）
- **浏览查询**：显示校区全部教练员列表
- **结果展示**：教练员基本信息、照片、获奖信息

#### 3.3.2 双选机制
- **选择限制**：学员最多选择2位教练，教练最多指导20名学员
- **申请流程**：学员申请 → 教练审核 → 建立关系
- **记录保存**：保存所有双选记录（包括失败记录）

### 3.4 课程预约模块

#### 3.4.1 预约流程
- 选择已建立双选关系的教练员
- 查看教练员未来一周课表
- 选择空白时间段和球台
- 教练员确认预约
- 支付课时费

#### 3.4.2 取消机制
- **时间限制**：上课前24小时以上
- **确认机制**：需对方确认
- **次数限制**：每月最多3次
- **退款处理**：自动退回学员账户

### 3.5 支付系统模块

#### 3.5.1 支付方式
- **线上支付**：微信、支付宝（二维码扫描）
- **线下支付**：校区管理员手工录入

#### 3.5.2 费用计算
- 根据教练等级和训练时长计算课时费
- 账户余额不足时拒绝预约
- 自动扣费和退费机制

### 3.6 比赛管理模块

#### 3.6.1 比赛组织
- **时间**：每月第四个星期天
- **组别**：甲、乙、丙三个组别
- **报名费**：30元/人

#### 3.6.2 赛制安排
- **≤6人**：全循环赛制
- **>6人**：分组循环+交叉淘汰
- **球台分配**：随机分配

### 3.7 评价系统模块
- **触发时机**：课程结束后自动发起
- **评价内容**：
  - 学员：训练收获和教训
  - 教练：学员表现和改进建议
- **查询功能**：支持历史评价查询

### 3.8 消息通知模块
- 课前1小时提醒
- 双选申请通知
- 预约确认通知
- 管理员操作通知

### 3.9 系统日志模块
- 记录所有重要操作
- 支持校区管理员查询
- 包含时间、用户、操作类型等信息

## 4. 非功能需求

### 4.1 性能要求
- 支持多用户并发访问
- 响应时间 < 3秒
- 系统可用性 > 99%

### 4.2 安全要求
- 用户密码加密存储
- 角色权限控制
- 数据传输加密
- 防SQL注入

### 4.3 可用性要求
- 界面友好，操作简便
- 支持主流浏览器
- 移动端适配

### 4.4 付费服务要求
- 年费500元
- 唯一密钥绑定设备
- 到期提醒和续费机制

## 5. 技术约束

### 5.1 开发环境
- **后端框架**：Django
- **数据库**：MySQL
- **开发方法**：敏捷开发

### 5.2 部署要求
- 支持单机部署
- 设备绑定机制
- 许可证验证

## 6. 业务流程

### 6.1 学员选课流程
1. 学员注册 → 查询教练 → 申请双选 → 教练确认 → 建立关系
2. 预约课程 → 选择时间和球台 → 教练确认 → 支付费用 → 预约成功
3. 上课提醒 → 完成训练 → 课后评价

### 6.2 教练入职流程
1. 教练注册申请 → 校区管理员审核 → 等级认定 → 注册成功
2. 接收学员申请 → 审核通过 → 建立师生关系
3. 管理课表 → 确认预约 → 开展教学 → 评价学员

### 6.3 比赛管理流程
1. 系统发布比赛通知 → 学员报名缴费 → 系统分组排赛 → 比赛进行 → 结果统计

## 7. 数据需求

### 7.1 核心实体
- 用户（学员、教练员、管理员）
- 校区
- 课程预约
- 支付记录
- 比赛信息
- 评价记录
- 系统日志

### 7.2 关键关系
- 用户-校区：多对一
- 学员-教练：多对多（限制数量）
- 预约-用户：多对一
- 支付-用户：多对一

## 8. 接口需求

### 8.1 外部接口
- 微信支付API
- 支付宝支付API

### 8.2 内部接口
- 用户认证接口
- 数据查询接口
- 消息通知接口

## 9. 风险分析

### 9.1 技术风险
- 支付接口集成复杂性
- 并发访问性能问题
- 数据安全风险

### 9.2 业务风险
- 用户需求变更
- 竞争对手压力
- 市场接受度不确定

## 10. 验收标准

### 10.1 功能验收
- 所有功能模块正常运行
- 业务流程完整可用
- 数据准确性验证

### 10.2 性能验收
- 满足性能指标要求
- 压力测试通过
- 安全测试通过

---

**文档版本**：V1.0  
**编写日期**：2025年1月  
**编写人员**：开发团队  
**审核状态**：待审核