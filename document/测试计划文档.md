# 乒乓球培训管理系统 - 测试计划文档
- 《测试计划文档》 ：专注于测试策略、范围、类型和用例设计，作为测试的规划文档
- 《测试执行指南》 ：专注于具体的执行步骤、命令操作和实践指导，作为操作手册
## 1. 测试概述

### 1.1 测试目标
本测试计划针对乒乓球培训管理系统课程设计项目，确保系统核心功能的正确性和基本稳定性。重点验证用户管理、课程预约、教练选择等主要业务流程。

### 1.2 测试范围
- **用户管理模块**：用户注册、登录、角色权限
- **教练管理模块**：教练信息展示、师生关系管理
- **课程预约模块**：课程预约、取消预约、时间冲突检测
- **支付管理模块**：充值、余额查询、支付记录
- **比赛管理模块**：比赛报名、比赛信息查看
- **消息通知模块**：系统通知、消息查看
- **校区管理模块**：校区信息管理、基础数据维护
- **日志管理模块**：系统日志、登录日志记录和查询

### 1.3 测试策略
采用多层次测试策略，充分利用现有测试代码和工具：
- **单元测试**：基于Django内置测试框架，使用`tests/test_unit.py`（已修复Django配置问题）
- **功能测试**：基于`tests/test_functional.py`进行功能验证（已修复数据完整性问题）
- **API接口测试**：利用现有的API测试代码进行接口验证
- **专项功能测试**：复用`test/`目录下的专项测试脚本（如`run_all_tests.py`、`simple_test.py`）
- **测试数据管理**：使用现有的测试数据管理工具

## 2. 测试环境

### 2.1 软件环境
- **后端**：Python 3.8+, Django 4.2, SQLite3（开发环境）
- **前端**：Vue.js 3, Node.js 16+
- **测试工具**：Django内置测试框架, Python requests库, 浏览器手动测试

### 2.2 测试数据
- **基础用户数据**：学员、教练、管理员测试账户
- **课程数据**：基本课程信息和时间安排
- **预约数据**：测试预约记录
- **支付数据**：测试支付订单和交易记录
- **日志数据**：系统操作日志和登录记录

### 2.3 现有测试资源
项目已具备完整的测试基础设施：
- **测试执行器**：`run_tests.py`（统一测试入口）
- **测试数据管理**：`tests/test_data.py`（TestDataManager类）
- **专项测试工具**：`test/`目录下的各种测试脚本
- **测试报告生成**：自动化测试报告和结果分析

## 3. 测试类型和方法

### 3.1 单元测试

使用Django内置测试框架进行单元测试，基于现有的`tests/test_unit.py`文件（已修复Django环境配置问题）。

**测试文件位置**：`tests/test_unit.py`
**执行命令**：`python manage.py test tests.test_unit`
**测试状态**：✅ 正常运行（18个测试用例全部通过）

**现有测试类**：
- `UserModelTest`：用户模型测试
- `CampusModelTest`：校区模型测试  
- `SystemLogModelTest`：系统日志模型测试
- `LoginLogModelTest`：登录日志模型测试
- `BookingModelTest`：预约模型测试
- `PaymentModelTest`：支付模型测试
- `NotificationModelTest`：通知模型测试
- `LogUtilsTest`：日志工具函数测试
- `ViewPermissionTest`：视图权限测试
- `UserAPITest`：用户API接口测试
- `BookingAPITest`：预约API接口测试

**测试覆盖范围**：
- **模型测试**：用户模型、预约模型、日志模型等核心数据模型
- **API接口测试**：用户管理、预约管理等API接口功能
- **工具函数测试**：日志记录、数据验证等辅助功能
- **权限验证测试**：视图权限和访问控制

### 3.2 功能测试

基于现有的`tests/test_functional.py`进行功能测试（已修复数据完整性问题）。

**测试文件位置**：`tests/test_functional.py`
**执行命令**：`python manage.py test tests.test_functional`
**测试状态**：✅ 正常运行（16个测试用例全部通过）

**现有测试类**：
- `UserFunctionalTest`：用户功能测试
- `BookingFunctionalTest`：预约功能测试
- `PaymentFunctionalTest`：支付功能测试
- `CoachFunctionalTest`：教练功能测试
- `NotificationFunctionalTest`：通知功能测试
- `SystemManagementTest`：系统管理功能测试

### 3.3 专项功能测试

利用`test/`目录下的专项测试脚本进行特定功能的深度测试。

**教练选择功能测试**：
- `test/test_coach_selection_backend.py`：后端API测试
- `test/run_all_tests.py`：综合测试执行器
- `test/final_test_summary.py`：测试结果汇总

**测试数据管理工具**：
- `test/create_test_data.py`：创建测试数据
- `test/clean_test_data.py`：清理测试数据
- `test/create_admin_and_test_data.py`：创建管理员和测试数据

### 3.4 日志模块测试

基于现有的`logs/tests.py`进行日志功能测试。

**测试内容**：
- `SystemLog`模型测试
- `LoginLog`模型测试
- 日志工具函数测试
- 日志API接口测试

### 3.5 基础安全测试

**测试内容**：
- 未授权访问防护
- 基本权限控制验证
- 密码安全策略验证

**测试方法**：
- 手动测试验证
- 代码审查

## 4. 测试执行

### 4.1 执行原则
- 按照单元测试 → 功能测试 → 专项测试的顺序执行
- 每次测试前确保测试数据的完整性
- 测试完成后及时清理测试数据

*详细的执行步骤和命令请参考《测试执行指南》文档。*

## 5. 测试工具

### 5.1 测试框架
- **Django内置测试框架**：用于单元测试和API测试
- **Python requests库**：用于API接口测试和HTTP请求模拟
- **浏览器手动测试**：用于前端功能验证

### 5.2 测试数据管理
- **TestDataManager类**：统一的测试数据管理工具（位于`tests/test_data.py`）
- **专项数据管理脚本**：针对特定功能的数据创建和清理工具
*详细的工具使用方法请参考《测试执行指南》文档。*

## 6. 测试文件结构

项目的测试代码分布在两个主要目录：

### 6.1 主要测试目录 (`tests/`)

```
tests/
├── __init__.py                 # 测试包初始化
├── test_unit.py               # 单元测试（已修复Django配置问题，18个测试用例全部通过）
├── test_functional.py         # 功能测试（已修复数据完整性问题，16个测试用例全部通过）
└── test_data.py               # 测试数据管理（TestDataManager类）
```

### 6.2 专项测试目录 (`test/`)

```
test/
├── run_all_tests.py           # 综合测试执行器（后端API、前端功能、端到端测试）
├── test_coach_selection_backend.py  # 教练选择后端API测试
├── final_test_summary.py      # 测试结果汇总
├── create_test_data.py        # 创建测试数据
├── clean_test_data.py         # 清理测试数据
├── create_admin_and_test_data.py  # 创建管理员和测试数据
├── backend_test_report.json   # 后端测试报告（由run_all_tests.py生成）
├── e2e_test_report.json       # 端到端测试报告（由run_all_tests.py生成）
├── test_report.json           # 综合测试报告（由run_all_tests.py生成）
├── frontend_test.html         # 前端测试页面（由run_all_tests.py生成）
└── [其他专项测试脚本]
```

### 6.3 应用级测试文件

```
logs/
└── tests.py                   # 日志模块测试

notifications/
└── run_tests.py              # 通知模块测试执行器
```

## 7. 风险管理

### 7.1 主要风险
- **环境配置问题**：开发环境配置不一致
- **数据库问题**：测试数据污染或丢失
- **时间限制**：课程设计时间有限

### 7.2 应对措施
- 提供详细的环境配置文档
- 使用虚拟环境管理依赖
- 重点测试核心功能

## 附录：快速开始指南

### 基本测试流程

1. **环境准备**：安装依赖、配置数据库
2. **数据准备**：创建测试数据
3. **执行测试**：按单元测试 → 功能测试 → 专项测试的顺序执行
4. **结果分析**：查看测试报告，分析失败原因
5. **数据清理**：清理测试数据

*详细的执行命令和操作步骤请参考《测试执行指南》文档。*